package masr.face;

import masr.common.XMLConverter;
import masr.shared.TestObjects;
import org.json.JSONException;
import org.json.JSONObject;
import org.junit.Test;

import java.io.IOException;

import static org.junit.Assert.assertArrayEquals;
import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertSame;

public class FaceAttributeTests {

    JSONObject json = new JSONObject("{\"face_num\":1,\"face_rect\":[108,102,178,247],\"face_prob\":[1.0],\"pose\":[5.1532793045043945,6.295505523681641,-6.033541202545166],\"landmark_num\":105,\"landmark\":[122.80613708496094,196.53948974609375,185.1776885986328,177.9932861328125,150.17874145507812,170.252197265625,152.68804931640625,183.00698852539062,127.66112518310547,184.01336669921875,137.66329956054688,175.08673095703125,163.1704559326172,166.84426879882812,176.5087127685547,167.93650817871094,132.4216766357422,191.23233032226562,142.19168090820312,186.21546936035156,163.38995361328125,180.54298400878906,174.3411865234375,179.77622985839844,214.05287170410156,177.1901092529297,275.56683349609375,181.83551025390625,245.6470947265625,160.93182373046875,245.30938720703125,175.34397888183594,220.21197509765625,165.83694458007812,232.5404052734375,161.45440673828125,258.5386962890625,163.06082153320312,269.41070556640625,170.2386016845703,224.49966430664062,176.9615478515625,234.86376953125,175.625732421875,255.75743103027344,175.35189819335938,265.8935546875,177.88247680664062,142.84584045410156,207.1036376953125,178.4206085205078,204.7051544189453,146.79904174804688,204.3185272216797,151.13705444335938,202.18258666992188,155.66661071777344,200.48916625976562,160.39773559570312,199.49090576171875,165.23019409179688,199.32290649414062,170.01353454589844,200.01156616210938,174.43679809570312,201.96400451660156,147.25839233398438,207.945556640625,151.75247192382812,207.91249084472656,156.2398223876953,207.66046142578125,160.7320098876953,207.52236938476562,165.2135009765625,207.18206787109375,169.67709350585938,206.65625,174.1278076171875,206.03634643554688,224.68185424804688,199.41368103027344,263.08599853515625,198.9185333251953,229.2433319091797,197.5349578857422,233.9759063720703,196.15478515625,238.8683319091797,195.5267333984375,243.79794311523438,195.32455444335938,248.72877502441406,195.51483154296875,253.59910583496094,196.30902099609375,258.4404296875,197.26348876953125,229.36094665527344,200.67474365234375,234.20143127441406,200.91802978515625,239.0478973388672,200.8814239501953,243.8944549560547,200.8670196533203,248.73939514160156,200.7406005859375,253.58587646484375,200.760498046875,258.3807373046875,200.0778045654297,204.2652587890625,197.1873779296875,211.38255310058594,232.28237915039062,207.91578674316406,214.67913818359375,210.82125854492188,246.137451171875,183.672119140625,247.04995727539062,234.1393280029297,240.8878173828125,162.58953857421875,283.73919677734375,250.39402770996094,274.77447509765625,167.8103790283203,282.81097412109375,246.0330352783203,275.9188537597656,210.7930145263672,268.689697265625,201.27496337890625,267.260009765625,219.27667236328125,265.779296875,180.653076171875,272.5289306640625,235.42794799804688,268.3152160644531,171.03445434570312,277.1658020019531,190.7176513671875,268.90704345703125,227.44581604003906,266.4603576660156,243.22586059570312,270.8321838378906,215.45718383789062,302.7208251953125,187.80078125,296.6649169921875,236.3720703125,293.452880859375,174.89346313476562,290.78948974609375,201.45657348632812,300.47967529296875,226.8566436767578,300.2412109375,243.89691162109375,284.4988098144531,211.75660705566406,274.376220703125,213.97586059570312,290.962646484375,189.03895568847656,274.9513244628906,190.43467712402344,289.29486083984375,229.0846710205078,272.2471923828125,231.38778686523438,286.3540954589844,178.03965759277344,277.809814453125,178.8831787109375,286.88189697265625,200.37635803222656,274.0671081542969,202.18115234375,290.4664306640625,220.40316772460938,273.1697692871094,222.8697967529297,289.36627197265625,237.76498413085938,273.1236572265625,239.1658935546875,281.7721252441406,102.9037094116211,221.8594207763672,284.624755859375,200.09738159179688,218.3408660888672,347.2842712402344,128.65228271484375,310.82025146484375,283.5517272949219,286.4817199707031,111.54674530029297,267.4948425292969,288.38372802734375,242.44244384765625,170.19046020507812,340.3262023925781,256.9898986816406,325.8539123535156],\"iris\":[159.4840087890625,202.75076293945312,8.145940780639648,245.2355194091797,197.622802734375,8.145940780639648],\"gender\":[1],\"age\":[37],\"expression\":[1],\"glass\":[0],\"dense_fea_len\":1024,\"dense_fea\":[0.006406005006283522,0.018362946808338165,0.038689322769641876,-4.733073874376714E-4,-0.0322788804769516,-0.026507370173931122,0.02787178009748459,-0.008212666027247906,-0.028099482879042625,-0.0401606447994709,-0.030049150809645653,-0.0338468924164772,-0.02848280593752861,0.011735312640666962,0.028608517721295357,0.0024369105231016874,-0.004437744151800871,0.04094599187374115,0.012615878134965897,0.00204615481197834,0.009704641997814178,-0.010358065366744995,0.010837859474122524,-0.0013068340485915542,0.04261723905801773,-0.018026528880000114,0.01754181645810604,0.029894234612584114,-0.034218680113554,-0.009280691854655743,-6.189816631376743E-4,-0.07495234161615372,-0.005324606318026781,0.003754034172743559,-0.050942450761795044,-0.0413249209523201,0.0046454318799078465,0.020125804468989372,-0.028047911822795868,-0.018924864009022713,0.029279977083206177,-0.03546932339668274,0.02953619323670864,0.03276253864169121,0.030919205397367477,-0.022094128653407097,0.01919398084282875,-0.018918069079518318,0.026568954810500145,-0.053211141377687454,-0.005455267149955034,-0.02451573871076107,-0.030547132715582848,0.016546307131648064,-4.371597897261381E-4,-0.0031804554164409637,-9.368743485538289E-5,0.007131751161068678,-0.033376242965459824,-0.010889378376305103,0.06174064055085182,0.010973859578371048,-0.025741925463080406,-0.04193033277988434,0.019498124718666077,0.022414321079850197,0.02796817384660244,-0.04888620227575302,-0.02266501635313034,-0.011689036153256893,-0.020936205983161926,-0.014215091243386269,0.003716278588399291,0.018150189891457558,-0.03235771879553795,-0.009358282200992107,0.030333412811160088,0.01522245816886425,0.03992128744721413,-0.025585591793060303,-3.71602043742314E-4,0.013594898395240307,0.0060650985687971115,-0.08444001525640488,-0.024791333824396133,0.0028220340609550476,0.027509378269314766,-0.022495465353131294,0.004393341951072216,-0.018227659165859222,0.023487940430641174,-0.011452079750597477,-0.04533456265926361,-0.011372102424502373,0.02065063640475273,-0.005621215328574181,-0.06690791249275208,0.006560353562235832,0.019635021686553955,0.08112923800945282,-0.03208858519792557,0.042032934725284576,-0.005100511945784092,-0.01749134063720703,0.0341842845082283,-0.01454294752329588,-0.08010205626487732,0.01335255429148674,0.005016382783651352,-0.007376692723482847,0.001352125545963645,0.05704938620328903,-0.050197992473840714,0.003581386059522629,0.005489157047122717,-0.027870140969753265,-0.0697435662150383,-0.030022671446204185,0.01351971086114645,-0.016315892338752747,0.018285425379872322,-0.02367904596030712,0.015297908335924149,-0.01089654304087162,-0.027442311868071556,-0.04969128221273422,0.0515592023730278,-0.026088897138834,-0.0028223800472915173,0.015361802652478218,-0.007743348833173513,-0.02803679183125496,0.0027553807012736797,0.03527297452092171,-0.04876185953617096,-0.01524298544973135,-0.016065984964370728,0.016734536737203598,0.021436525508761406,0.002147398190572858,-0.05390510335564613,0.05700856074690819,-0.037813007831573486,-0.028567185625433922,-0.005668310448527336,-0.03974805399775505,0.01236796472221613,-0.013351218774914742,-0.06336211413145065,0.009036251343786716,-0.006432029884308577,0.01751069910824299,0.010955899953842163,-0.034713905304670334,-0.035942479968070984,-0.020186632871627808,0.0342562310397625,0.02048005722463131,0.009086266160011292,0.002086302498355508,-0.022010408341884613,0.007490037474781275,-0.07966864854097366,0.011983657255768776,-0.008379743434488773,2.887625014409423E-4,-0.03292899578809738,0.0242532379925251,0.06212283670902252,-0.015890082344412804,0.0023218542337417603,-0.012106603011488914,-0.044989459216594696,-0.0033423404674977064,-0.02268713340163231,0.052364494651556015,-0.01841161772608757,-0.015159866772592068,0.0260712169110775,0.009662448428571224,0.006650451570749283,-0.009988361969590187,0.015296725556254387,-0.06157543510198593,0.019331716001033783,-0.026705767959356308,-0.020098822191357613,0.005750017240643501,0.0032749997917562723,-0.025948679074645042,-0.015821821987628937,0.005443723872303963,-0.07240390032529831,-0.004643624182790518,0.018090568482875824,0.031750068068504333,0.04639660567045212,-0.06773434579372406,0.025348369032144547,-0.03206251561641693,0.023489927873015404,-0.08956119418144226,-0.014947453513741493,-0.013908992521464825,0.003580064745619893,0.0038280352018773556,-0.08309190720319748,-0.013908512890338898,-0.006004579830914736,0.012915197759866714,-0.0012462955201044679,0.007088026497513056,-0.015211663208901882,-0.03943575173616409,0.03290756419301033,-0.01257606316357851,0.011312583461403847,0.0020011265296489,-0.03472740575671196,0.028535081073641777,0.023359205573797226,-0.028734669089317322,0.03726089000701904,0.030945025384426117,0.08289003372192383,0.028162624686956406,0.023424286395311356,0.03529718890786171,-0.01951642893254757,-0.01670471951365471,-0.008427719585597515,0.05886859446763992,0.0485774427652359,-0.011468774639070034,-4.4262228766456246E-4,-0.0501977913081646,0.022322991862893105,-0.015308419242501259,0.01489795558154583,-0.009524521417915821,0.030010338872671127,0.038349609822034836,0.01907270774245262,0.015144932083785534,-0.04268508777022362,-0.03071122244000435,-0.026739541441202164,0.04856552183628082,-0.002500449772924185,-0.07938618212938309,0.07367503643035889,0.027601590380072594,0.03144285827875137,0.07924561947584152,0.052078377455472946,-0.011105291545391083,0.004330144263803959,-0.006316793151199818,-0.03109045885503292,-0.002156591974198818,0.02224712073802948,-0.002486826153472066,-0.032990049570798874,0.031111199408769608,-0.01046785432845354,0.0186148788779974,0.008591210469603539,-0.027437640354037285,-0.03098353184759617,0.018312720581889153,-0.04397805035114288,-0.013415241613984108,0.025075187906622887,-0.041958484798669815,0.018747517839074135,0.012639260850846767,-0.016383232548832893,0.032454632222652435,-0.008205068297684193,-0.005040094256401062,-0.02749558538198471,-0.028192827478051186,-2.470468170940876E-4,-0.024523450061678886,-6.626399117521942E-4,-0.046231407672166824,-0.017184633761644363,0.004167935810983181,0.01356259174644947,0.031155530363321304,0.051633622497320175,-0.044745661318302155,-8.926492882892489E-4,0.008548899553716183,0.009386831894516945,-0.03120279498398304,0.004063768312335014,0.030108628794550896,-0.007028082851320505,0.008775783702731133,0.04058632627129555,-0.05478764325380325,-1.373865525238216E-4,-0.005575985182076693,-0.03267175704240799,0.029610374942421913,-0.037342555820941925,-0.0013838850427418947,-0.010468412190675735,-0.00220694812014699,-0.029100868850946426,-0.025321876630187035,-0.030393632128834724,-0.021705232560634613,0.04547901451587677,0.0910116583108902,0.04317423328757286,0.04311510547995567,0.009193969890475273,-0.028632132336497307,-0.01734745502471924,0.012599487788975239,-0.03362642228603363,0.022213386371731758,0.03219445422291756,0.039334625005722046,0.015805434435606003,0.01289147324860096,0.019469885155558586,0.015198664739727974,-0.08593858778476715,-0.03600678592920303,0.02221103571355343,-0.023486899212002754,0.01859419047832489,-0.036738865077495575,0.03341693431138992,-0.05707281455397606,0.01181376539170742,0.033579058945178986,-0.00255423691123724,-0.01706012152135372,-0.06922769546508789,0.029022783041000366,0.006548687815666199,0.0042828782461583614,-0.033089496195316315,-9.911818196997046E-4,-0.0014696536818519235,0.004223751835525036,0.02357647940516472,6.55092007946223E-4,-0.019158488139510155,-0.013997983187437057,-0.041109681129455566,0.02235720492899418,-0.0060310373082757,-0.07158232480287552,-0.04352118819952011,0.0502198301255703,-0.005234927870333195,-0.00560877425596118,0.020612524822354317,0.02774997241795063,0.0056165121495723724,9.667639387771487E-4,0.011431211605668068,0.0037129302509129047,0.014742262661457062,-0.01588832400739193,-0.04437115043401718,0.049579400569200516,-0.030208129435777664,-0.0011577688856050372,0.02734011597931385,-0.023798132315278053,-0.017610935494303703,0.010012305341660976,-0.02225160226225853,0.06523565202951431,0.03202901408076286,0.008716464973986149,-0.011424905620515347,0.02808249182999134,0.01021538581699133,-0.03844616189599037,0.012616509571671486,-0.06301907449960709,-0.06100226566195488,-0.011434915475547314,-0.011923732236027718,0.016321146860718727,-0.018137365579605103,-0.004036687780171633,-0.01585783250629902,0.007798838894814253,-0.014695875346660614,0.02967425249516964,4.480673815123737E-4,-0.046264681965112686,-0.0064573162235319614,-0.018604358658194542,-0.04131210595369339,-0.03809940442442894,-0.007341862190514803,-0.032200511544942856,0.006625481881201267,-0.032471273094415665,0.06239571422338486,0.0266746673732996,-0.056830987334251404,-0.02788439579308033,0.019666511565446854,0.02265365794301033,-0.04043018817901611,0.021205458790063858,0.005621186923235655,0.04242726042866707,0.0694180577993393,-5.76859456487E-4,-0.016767455264925957,-0.021386418491601944,0.0263473242521286,-0.025666536763310432,0.022303782403469086,-0.029906922951340675,0.03107077069580555,-0.007776176556944847,-0.041715558618307114,-0.015744850039482117,0.02035500295460224,-0.010972720570862293,0.022135209292173386,-0.012659198604524136,0.04861418157815933,-0.04510251805186272,-0.07115799933671951,-0.00679696723818779,0.023958738893270493,0.01140989363193512,-0.024834467098116875,-0.003414283273741603,0.014030825346708298,-0.013078671880066395,0.012229635380208492,0.07269322872161865,0.06704039126634598,0.0418483205139637,0.03785423934459686,-0.02428424172103405,-0.002640162594616413,0.019806979224085808,0.013548426330089569,-0.02873293124139309,0.0077720931731164455,-0.024229854345321655,0.006341016385704279,0.0015286625130102038,0.049550943076610565,-0.02434823475778103,0.03490660339593887,0.02120896428823471,-0.03408686816692352,0.005176513455808163,0.04519965127110481,0.03154755383729935,-0.01518058031797409,-0.027366898953914642,0.01938708685338497,0.0036265370436012745,-0.03393023833632469,-0.044967178255319595,0.001898326212540269,-0.03075844794511795,0.027307242155075073,-0.040075626224279404,0.035260118544101715,0.005666826386004686,-0.026295553892850876,-0.014903606846928596,-0.027525074779987335,0.032695017755031586,-0.024637987837195396,-0.015566344372928143,0.04621322825551033,-0.01751663349568844,0.041810061782598495,-0.010119142010807991,0.02705821394920349,0.017679080367088318,-0.009437784552574158,-0.06052642688155174,0.016611402854323387,-0.010176916606724262,-0.06534568965435028,-0.00927977729588747,0.0030153742991387844,0.029822176322340965,-0.0017150011844933033,-0.08334127813577652,0.029930034652352333,-0.002005603862926364,0.07264599949121475,-0.03625691309571266,0.05939347669482231,0.023134194314479828,-0.008437056094408035,-0.0508655421435833,0.015534098260104656,-0.02033281698822975,0.017009740695357323,0.037819307297468185,-0.0029800047632306814,-0.01863439753651619,0.034950435161590576,0.003845649305731058,-0.003181920852512121,-0.024314526468515396,0.04554947093129158,0.04047379642724991,-0.008339247666299343,-0.010153571143746376,-0.020873485133051872,-0.021333467215299606,-0.04212876036763191,-0.05490858852863312,0.012347639538347721,-0.044239867478609085,-0.01057609636336565,0.028628403320908546,0.022010676562786102,0.00433626864105463,0.004662131424993277,-0.026086803525686264,0.00809613335877657,-0.025501783937215805,0.01006348803639412,-0.06457360833883286,0.034515563398599625,-0.011379752308130264,0.021610558032989502,-0.03149523586034775,0.05256306007504463,-0.05008560046553612,0.0060769664123654366,-0.037061870098114014,0.016057826578617096,-0.03932616859674454,-0.03524387255311012,0.007384611293673515,0.014888145960867405,0.04258602857589722,-0.01287586148828268,0.0031581800431013107,0.03145977854728699,0.007781248074024916,0.013951124623417854,0.006236760877072811,-0.04251642897725105,-0.014493836089968681,0.00444277236238122,-0.025695540010929108,-0.03329926356673241,0.009927816689014435,-0.018710367381572723,0.011251860298216343,0.001454725512303412,0.004947367124259472,-0.0076073030941188335,0.007326696068048477,-0.049422699958086014,-0.03692100569605827,0.043929919600486755,0.010887006297707558,0.010255478322505951,0.00938411895185709,0.013084037229418755,0.030854634940624237,0.014342641457915306,-0.013754937797784805,-0.030989447608590126,0.007274099625647068,-0.024218520149588585,-0.03774799033999443,-0.02985856682062149,0.0427553690969944,-0.006629052106291056,0.031950365751981735,0.05308673530817032,-0.015316035598516464,-0.019849753007292747,-0.05389173701405525,-0.004627071786671877,0.043613508343696594,-0.03853466734290123,-0.02624616026878357,-0.030152715742588043,0.010150445625185966,-0.010722782462835312,-0.0036095601972192526,0.010399412363767624,-0.03943764790892601,0.018193475902080536,-0.04256358742713928,-0.0020484146662056446,-0.017976826056838036,0.008781327866017818,-0.003912225365638733,0.0040912204422056675,0.011743823066353798,0.010334688238799572,-0.02190936729311943,-0.03685544803738594,0.005225693807005882,0.07137764245271683,-0.011829120106995106,0.04017692804336548,0.04039354249835014,-0.07240979373455048,-3.9013754576444626E-4,0.023862870410084724,0.029912535101175308,0.011051713488996029,-4.788468359038234E-4,0.01816488243639469,0.017843829467892647,0.023293467238545418,-0.06728507578372955,-0.024224402382969856,-0.001914442633278668,0.02124096266925335,0.027374695986509323,0.06101866811513901,0.007221028674393892,0.023222602903842926,-0.00819824542850256,-0.04556947201490402,-0.044173285365104675,0.01860938034951687,-0.05030051991343498,-0.030257271602749825,0.0034663330297917128,-0.03415658697485924,0.0019323145970702171,-0.006114067975431681,0.027271823957562447,-0.0568801574409008,-0.004570465534925461,-0.04511919245123863,0.0072137280367314816,0.012734944932162762,0.027652345597743988,-0.06242240592837334,0.05329727381467819,-0.025635700672864914,-0.035132355988025665,0.041418034583330154,-0.02699950709939003,0.05974017456173897,0.0481564924120903,-0.0027393309865146875,0.001284818397834897,-0.022251751273870468,0.004075664095580578,3.5948632284998894E-4,-0.05744235962629318,0.03400697931647301,-0.0373799130320549,-0.008717115968465805,-0.016847269609570503,0.0632576122879982,0.018679356202483177,8.211590466089547E-4,0.008577204309403896,-0.01222906168550253,-0.02563992328941822,0.026711873710155487,-0.010640928521752357,-0.0489472933113575,0.023868659511208534,0.04041289538145065,0.003186008660122752,0.00563550041988492,0.04319712892174721,0.0029868432320654392,0.0236671045422554,0.017346445471048355,3.140090557280928E-4,0.004232370760291815,0.01786336675286293,-0.03544003143906593,0.03731271252036095,0.009099296294152737,0.0049155037850141525,0.004006126895546913,-0.06017518788576126,0.021161943674087524,-9.435406536795199E-4,-0.02327139489352703,-0.034762244671583176,0.008355813100934029,-0.02295072004199028,-0.06599421799182892,0.0015286749694496393,0.004547120071947575,-0.010127670131623745,0.059322625398635864,-0.05547167360782623,-0.006644109264016151,-0.019006425514817238,0.0030056675896048546,0.027355598285794258,3.8971289177425206E-4,-0.05784705653786659,-0.005834689363837242,-0.011882356368005276,0.011820421554148197,-0.001970036420971155,-0.027572987601161003,-0.0037850653752684593,0.0057846130803227425,-0.016010001301765442,0.03432539105415344,-0.0017434114124625921,-0.012844834476709366,-0.005091440863907337,0.032350972294807434,-0.08603837341070175,0.06314610689878464,-0.0016581844538450241,-0.013520075008273125,0.01055283285677433,0.00933793094009161,-0.03904158994555473,0.0035637859255075455,-0.027919422835111618,0.06418611854314804,-0.05427424609661102,0.08228956907987595,-0.00990238692611456,-0.06232743710279465,-0.030038971453905106,0.011837683618068695,0.015526628121733665,0.03554961457848549,-0.0179518461227417,0.004992191679775715,-0.04686447232961655,0.019277457147836685,0.031656160950660706,-0.01626446843147278,-0.009737851098179817,-0.008838437497615814,0.0013590836897492409,-0.052062395960092545,-0.0025308423209935427,-0.032640907913446426,-0.06057954207062721,-0.017656343057751656,-0.0016274539520964026,0.0033280770294368267,-0.05685299262404442,0.043761588633060455,-0.0020602247677743435,0.03190675005316734,0.0013596626231446862,0.004171906970441341,-0.01554446667432785,-0.02380347065627575,3.9399907109327614E-4,-0.027399422600865364,0.04140803590416908,0.08566385507583618,0.009409771300852299,0.02721664309501648,9.867873741313815E-4,-0.0524798259139061,0.057258982211351395,0.014348872005939484,0.047299519181251526,-0.04588804394006729,0.03096896782517433,-0.036844681948423386,0.01930725760757923,0.01792476326227188,-0.08472233265638351,0.011855527758598328,0.05658135190606117,-0.011521860025823116,0.020949985831975937,-0.0038726984057575464,0.016612457111477852,0.003525360021740198,-0.009346657432615757,8.701951592229307E-4,-0.00693011237308383,-0.0668887197971344,-0.049625758081674576,-0.02913001738488674,-0.0033518015407025814,0.04784083366394043,0.013227901421487331,-0.04480202868580818,-0.04095589742064476,-0.005730557255446911,0.010049447417259216,-0.07568465918302536,-0.010484028607606888,-0.0041151889599859715,0.028462707996368408,-0.01855289563536644,0.013975490815937519,0.05203652381896973,-0.0021295228507369757,0.021641692146658897,-0.005922568496316671,-0.02698994055390358,0.002598832594230771,-0.04910765215754509,-0.022445369511842728,0.05548930540680885,0.029943158850073814,-0.0469723641872406,-0.03871310502290726,0.007457411848008633,-0.025838762521743774,-0.0010505495592951775,0.026799548417329788,-0.02118968777358532,0.008472921326756477,-0.03441121429204941,0.02960464358329773,0.04419126734137535,0.006565578747540712,-0.07967857271432877,-2.9611351783387363E-4,0.006623056251555681,0.05228867009282112,0.010334214195609093,0.03242270648479462,0.051112137734889984,-0.03229580447077751,-9.134477586485445E-4,-0.06373978406190872,0.04589429870247841,-0.05052036792039871,0.0026367756072431803,-0.019944971427321434,0.04026619344949722,-0.003838320029899478,-0.021493596956133842,0.048111774027347565,-0.02416468784213066,-0.04308292269706726,-0.02102923020720482,-0.022176552563905716,0.055200882256031036,-0.026063183322548866,-0.027753230184316635,0.0023006906267255545,-0.010707643814384937,0.027486518025398254,0.024129444733262062,-0.006355645600706339,0.012065669521689415,0.04493723064661026,-0.03643554076552391,0.03693058341741562,-0.028011711314320564,-0.04622479900717735,0.014532617293298244,0.010875878855586052,0.00886779185384512,-0.0444406196475029,-0.056652262806892395,0.026803016662597656,5.16594504006207E-4,-0.033696264028549194,0.01882428303360939,-0.013545217923820019,0.006495458539575338,-0.036812521517276764,-0.03707249462604523,0.0036673271097242832,0.00392184080556035,0.03299950435757637,-0.052898798137903214,-0.08329884707927704,-0.014471891336143017,0.01170961931347847,-0.01823841594159603,0.03723514825105667,0.06764615327119827,-0.0413515642285347,-0.05664200708270073,0.015330399386584759,-0.005564573686569929,-0.05136400833725929,0.0298041682690382,-0.024709096178412437,-0.03623874485492706,0.006085394416004419,0.012329120188951492,-0.005595633294433355,0.016037119552493095,-0.05276993289589882,0.016623133793473244,0.01578851416707039,-0.014104020781815052,0.03265044838190079,-0.028244255110621452,-0.044899195432662964,0.007818679325282574,0.00857570581138134,-0.007794595789164305,-0.014006036333739758,-0.01988147757947445,-0.0324590802192688,0.0042404173873364925,-0.02811058610677719,0.08323907852172852,-0.020760582759976387,-0.0020152023062109947,0.01381204929202795,0.033193252980709076,0.038104165345430374,-0.029482392594218254,0.0367298424243927,-0.01994977705180645,0.049052465707063675,0.04144873097538948,-0.02753359079360962,-0.008399520069360733,-0.018139999359846115,-0.045420482754707336,0.011080075986683369,0.05663853511214256,-0.007756480015814304,0.009545309469103813,0.04626324400305748,-0.060346826910972595,-0.028445957228541374,0.04270928353071213,-0.03217892348766327,0.021066073328256607,-0.016249800100922585,-1.9864818023052067E-4,-0.06697552651166916,-0.015942377969622612,-0.03342665359377861,0.025651536881923676,-0.016146240755915642,-0.04303877428174019,0.008027792908251286,0.03386484086513519,-0.01148570142686367,0.015338709577918053,0.006486646365374327,0.007591957692056894,0.01658124476671219,0.02167503908276558,-0.0341491624712944,0.019820569083094597,0.03353215754032135,-0.03434852883219719,-0.0074115111492574215,0.005223331041634083,-0.022948715835809708,0.014687413349747658,-0.03801528364419937,-0.005730709992349148,-0.033473752439022064,-0.008610102348029613,0.019607027992606163,-0.013793129473924637,0.03588096797466278,0.048175375908613205,0.056011687964200974,-0.016726592555642128,-0.03808102384209633,-0.001989661483094096,0.02127412147819996,-0.018374288454651833,0.01693541370332241,0.022923702374100685,0.024232612922787666,0.010133937001228333,0.02911161445081234,0.0010769190266728401,0.05713380500674248,0.03513994440436363,0.006312419194728136,-0.046227142214775085,0.03764699772000313,0.02052939683198929,-0.031586334109306335,0.0014933099737390876,-0.013133897446095943,-0.03139843791723251,-0.008069601841270924,0.01438886672258377,-0.021704837679862976,0.012035788968205452,-0.011073820292949677,0.028104180470108986,0.02198082208633423,-0.015009532682597637,-0.015276995487511158,-0.008208698593080044,-0.013279073871672153,-0.0149738984182477,-0.001263042213395238,0.04177020862698555,0.053099747747182846,0.019512884318828583,-0.01286409143358469,0.04887119680643082,0.034799687564373016,-0.03192998096346855,0.03644445911049843,0.043856389820575714,0.0031429727096110582,-8.820686489343643E-4,0.019859977066516876],\"errno\":0,\"request_id\":\"00f4aa9a-f598-4dd4-8c22-30a6befd73c5\"}");

    public FaceAttributeTests() throws JSONException {
    }

    @Test
    public void testAliFaceAttribute() {
        try {
            org.json.JSONObject json = FaceAttribute.detect(TestObjects.base64Image);
            assertEquals(1, json.get("face_num"));
            assertArrayEquals(new String[]{"1"}, ((org.json.JSONArray) json.get("expression")).join(",").split(","));
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }

    @Test
    public void testConvertAliFaceAttributeToFaceBehavior() throws JSONException, IOException {
        FaceBehavior fb = FaceBehavior.fromAliFaceAttribute(json, TestObjects.base64Image);
        FaceBehavior expected = new FaceBehavior(true, 1, 43966, new float[]{143, 174}, new int[]{400, 422});

        assertEquals(XMLConverter.serializeObject(expected, "fb"), XMLConverter.serializeObject(fb, "fb"));
    }

}
